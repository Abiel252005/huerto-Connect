<div class="splash-screen" [class.fade-out]="isFadingOut" [class.hidden]="isHidden">
  <!-- Ambient Background Effects -->
  <div class="ambient-grid" aria-hidden="true"></div>
  <div class="ambient-particles" aria-hidden="true">
    <div class="particle p1"></div>
    <div class="particle p2"></div>
    <div class="particle p3"></div>
    <div class="particle p4"></div>
    <div class="particle p5"></div>
    <div class="particle p6"></div>
    <div class="particle p7"></div>
    <div class="particle p8"></div>
  </div>
  <div class="ambient-glow glow-a" aria-hidden="true"></div>
  <div class="ambient-glow glow-b" aria-hidden="true"></div>
  <div class="ambient-glow glow-c" aria-hidden="true"></div>

  <div class="splash-center">
    <svg class="ai-logo" viewBox="0 0 500 540" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
      <defs>
        <filter id="neon-blur" x="-50%" y="-50%" width="200%" height="200%">
          <feGaussianBlur stdDeviation="4" />
        </filter>
        <filter id="soft-glow" x="-50%" y="-50%" width="200%" height="200%">
          <feGaussianBlur stdDeviation="8" />
        </filter>

        <linearGradient id="ring-blue" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" stop-color="#00d4ff" />
          <stop offset="50%" stop-color="#2d8bff" />
          <stop offset="100%" stop-color="#00b4ff" />
        </linearGradient>
        <linearGradient id="ring-green" x1="0%" y1="100%" x2="100%" y2="0%">
          <stop offset="0%" stop-color="#00ff6a" />
          <stop offset="50%" stop-color="#00D4A1" />
          <stop offset="100%" stop-color="#00ffa3" />
        </linearGradient>
        <linearGradient id="stem-green" x1="0%" y1="100%" x2="100%" y2="0%">
          <stop offset="0%" stop-color="#1db75a" />
          <stop offset="100%" stop-color="#44d471" />
        </linearGradient>
        <linearGradient id="leaf-green" x1="0%" y1="100%" x2="100%" y2="0%">
          <stop offset="0%" stop-color="#2fbc62" />
          <stop offset="100%" stop-color="#70df8d" />
        </linearGradient>
        <linearGradient id="soil-brown" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" stop-color="#a07860" />
          <stop offset="50%" stop-color="#8f6a50" />
          <stop offset="100%" stop-color="#5d3e2d" />
        </linearGradient>
        <linearGradient id="root-blue" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" stop-color="#4dd9ff" />
          <stop offset="100%" stop-color="#2d6bff" />
        </linearGradient>

        <!-- Clip path to contain roots inside the bowl -->
        <clipPath id="root-clip">
          <path d="M 170 316 A 80 58 0 0 0 330 316 Z" />
        </clipPath>
      </defs>

      <!-- LAYER 1: Outer Arc — synced with loading percentage -->
      <g class="outer-arc-group">
        <path class="outer-arc-track" pathLength="1000" d="M 40 440 A 244 244 0 1 1 460 440"
          [attr.stroke-dashoffset]="arcOffset" />
        <path class="outer-arc-halo" pathLength="1000" d="M 40 440 A 244 244 0 1 1 460 440"
          [attr.stroke-dashoffset]="arcOffset" />
        <path class="outer-arc-energy" pathLength="1000" d="M 40 440 A 244 244 0 1 1 460 440"
          [attr.stroke-dashoffset]="arcOffset" />
        <path class="outer-arc-traveler" pathLength="1000" d="M 40 440 A 244 244 0 1 1 460 440" />
      </g>

      <!-- LAYER 2: Orbital Rings — activate at 25% -->
      <g class="orbit orbit-green" [class.active]="phaseOrbits">
        <path class="orbit-path" d="M 130 300 A 120 120 0 0 1 370 300" />
        <path class="orbit-flow" d="M 130 300 A 120 120 0 0 1 370 300" />
        <circle class="orbit-particle gp1" cx="160" cy="230" r="1.5" />
        <circle class="orbit-particle gp2" cx="250" cy="180" r="1.8" />
        <circle class="orbit-particle gp3" cx="340" cy="230" r="1.5" />
        <circle class="node n1" cx="130" cy="300" r="4" />
        <circle class="node n2" cx="170" cy="216" r="3.4" />
        <circle class="node n3" cx="250" cy="180" r="3.8" />
        <circle class="node n4" cx="330" cy="216" r="3.4" />
        <circle class="node n5" cx="370" cy="300" r="4" />
      </g>

      <g class="orbit orbit-blue" [class.active]="phaseOrbits">
        <path class="orbit-path" d="M 355 300 A 105 105 0 0 1 145 300" />
        <path class="orbit-flow" d="M 355 300 A 105 105 0 0 1 145 300" />
        <circle class="orbit-particle bp1" cx="340" cy="360" r="1.5" />
        <circle class="orbit-particle bp2" cx="250" cy="405" r="1.8" />
        <circle class="orbit-particle bp3" cx="160" cy="360" r="1.5" />
        <circle class="node b1" cx="355" cy="300" r="3.8" />
        <circle class="node b2" cx="320" cy="370" r="3.2" />
        <circle class="node b3" cx="250" cy="405" r="3.6" />
        <circle class="node b4" cx="180" cy="370" r="3.2" />
        <circle class="node b5" cx="145" cy="300" r="3.8" />
      </g>

      <!-- LAYER 3A: Soil Layer -->
      <g class="soil-group">
        <path class="soil-shadow" d="M 165 318 Q 250 290 335 318 Q 250 342 165 318 Z" />
        <path class="soil-layer" d="M 170 314 Q 250 286 330 314 Q 250 338 170 314 Z" />
        <path class="soil-highlight" d="M 185 310 Q 250 296 315 310" />
      </g>

      <!-- LAYER 3C: Digital Root System — Clipped to bowl -->
      <g class="root-system" [class.active]="phaseRoots" [style.opacity]="rootGlow">
        <path class="root-bowl" d="M 170 316 A 80 58 0 0 0 330 316" />
        <path class="root-bowl-glow" d="M 170 316 A 80 58 0 0 0 330 316" />

        <!-- All circuit traces clipped inside the bowl semicircle -->
        <g clip-path="url(#root-clip)">
          <!-- Central root: straight down with branches -->
          <path class="root-line r1" d="M 250 317 L 250 338 L 250 365" />
          <path class="root-line r2" d="M 250 338 L 236 338 L 236 352" />
          <path class="root-line r3" d="M 250 338 L 264 338 L 264 352" />

          <!-- Left primary: angles out like PCB trace -->
          <path class="root-line r4" d="M 232 317 L 232 328 L 215 328 L 215 348" />
          <!-- Left sub-branch -->
          <path class="root-line r5" d="M 215 336 L 198 336 L 198 350" />
          <!-- Left outer -->
          <path class="root-line r6" d="M 208 317 L 208 323 L 192 323 L 192 338" />

          <!-- Right primary: mirror -->
          <path class="root-line r7" d="M 268 317 L 268 328 L 285 328 L 285 348" />
          <!-- Right sub-branch -->
          <path class="root-line r8" d="M 285 336 L 302 336 L 302 350" />
          <!-- Right outer -->
          <path class="root-line r9" d="M 292 317 L 292 323 L 308 323 L 308 338" />

          <!-- Cross-connections -->
          <path class="root-link lk1" d="M 215 348 L 236 348 L 236 352" />
          <path class="root-link lk2" d="M 285 348 L 264 348 L 264 352" />
          <path class="root-link lk3" d="M 236 352 L 250 352 L 264 352" />
          <path class="root-link lk4" d="M 198 350 L 215 350 L 228 358" />
          <path class="root-link lk5" d="M 302 350 L 285 350 L 272 358" />
          <!-- Deep center V -->
          <path class="root-link lk6" d="M 228 358 L 250 365 L 272 358" />

          <!-- Junction nodes -->
          <circle class="root-node rn1" cx="250" cy="338" r="3" />
          <circle class="root-node rn2" cx="250" cy="365" r="3.2" />
          <circle class="root-node rn3" cx="232" cy="328" r="2.3" />
          <circle class="root-node rn4" cx="215" cy="348" r="2.5" />
          <circle class="root-node rn5" cx="198" cy="350" r="2.3" />
          <circle class="root-node rn6" cx="268" cy="328" r="2.3" />
          <circle class="root-node rn7" cx="285" cy="348" r="2.5" />
          <circle class="root-node rn8" cx="302" cy="350" r="2.3" />
          <circle class="root-node rn9" cx="192" cy="338" r="2.2" />
          <circle class="root-node rn10" cx="308" cy="338" r="2.2" />
          <circle class="root-node rn11" cx="236" cy="352" r="2.3" />
          <circle class="root-node rn12" cx="264" cy="352" r="2.3" />
          <circle class="root-node rn13" cx="228" cy="358" r="2.3" />
          <circle class="root-node rn14" cx="272" cy="358" r="2.3" />
          <circle class="root-node rn15" cx="250" cy="352" r="2.5" />
          <circle class="root-node rn16" cx="215" cy="336" r="2" />
          <circle class="root-node rn17" cx="285" cy="336" r="2" />

          <!-- Energy pulses -->
          <circle class="root-pulse p1" cx="250" cy="358" r="2" />
          <circle class="root-pulse p2" cx="215" cy="342" r="1.8" />
          <circle class="root-pulse p3" cx="285" cy="342" r="1.8" />
          <circle class="root-pulse p4" cx="198" cy="336" r="1.6" />
          <circle class="root-pulse p5" cx="302" cy="336" r="1.6" />
        </g>
      </g>

      <!-- LAYER 3B: Sprout — all synced from 0% -->
      <g class="sprout-core" [class.alive]="phaseAlive">
        <path class="sprout-stem" d="M 250 314 C 248 286 249 260 250 231" [attr.stroke-dashoffset]="stemDashOffset" />

        <path class="leaf-left" d="M 250 249 C 235 233 205 219 186 213 C 202 244 225 258 250 249 Z"
          [style.opacity]="leafOpacity"
          [style.transform]="'rotate(' + (20 - 20 * leafOpacity) + 'deg) scale(' + (0.15 + 0.85 * leafOpacity) + ')'" />

        <path class="leaf-right" d="M 250 242 C 269 224 296 211 317 205 C 302 236 276 251 250 242 Z"
          [style.opacity]="leafOpacity"
          [style.transform]="'rotate(' + (-20 + 20 * leafOpacity) + 'deg) scale(' + (0.15 + 0.85 * leafOpacity) + ')'" />

        <path class="leaf-vein vl" d="M 250 249 C 238 237 218 226 200 220" [style.opacity]="phaseAlive ? 1 : 0" />

        <path class="leaf-vein vr" d="M 250 242 C 264 228 286 217 305 210" [style.opacity]="phaseAlive ? 1 : 0" />

        <path class="sprout-small-stem" d="M 233 316 C 232 304 233 293 235 282"
          [attr.stroke-dashoffset]="smallStemDashOffset" />

        <path class="leaf-small" d="M 235 289 C 227 283 216 279 208 278 C 215 289 225 293 235 289 Z"
          [style.opacity]="smallStemProgress" />
      </g>
    </svg>

    <!-- LAYER 4: Brand Text -->
    <div class="brand-wrap">
      <h1 class="brand-title">
        <span class="word word-left">HUERT</span>
        <svg class="brand-leaf-o" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
          <path
            d="M16.9 8.2C10 9.8 6.8 14.6 5 19.8c4.1.8 8.7-.5 11.6-3.8 2.8-3.2 3.7-7.8 3.8-12.2-1.2 1.9-2.1 3.1-3.5 4.4z" />
          <path d="M10.2 19.7c1.8-2.9 4.2-5.4 8.3-7.3" />
        </svg>
        <span class="word word-right">CONNECT</span>
      </h1>

      <!-- Loading progress bar -->
      <div class="progress-bar-container">
        <div class="progress-bar-fill" [style.width.%]="loadPercent"></div>
      </div>

      <p class="brand-subtitle">{{ loadingText }} · {{ loadPercent }}%</p>
    </div>
  </div>
</div>