<section class="testimonials-section" id="testimonials">
    <div class="container">
        <div class="section-header">
            <span class="badge">Testimonios</span>
            <h2>Lo que dicen nuestros clientes</h2>
            <p class="section-subtitle">Productores que transformaron sus huertos con nuestra tecnolog√≠a</p>
        </div>

        <!-- Carousel Container -->
        <div class="carousel-container">
            <!-- Navigation Arrows -->
            <button class="carousel-arrow prev" (click)="onArrowClick('prev')" aria-label="Anterior">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="15 18 9 12 15 6" />
                </svg>
            </button>

            <div class="carousel-track">
                <div class="testimonial-card" *ngFor="let item of testimonials; let i = index"
                    [class.active]="i === currentIndex">

                    <div class="card-inner">
                        <!-- Quote Icon -->
                        <div class="quote-icon">
                            <svg width="40" height="40" viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M11.192 15.757c0-.88-.23-1.618-.69-2.217-.326-.412-.768-.683-1.327-.812-.55-.128-1.07-.137-1.54-.028-.16-.95.1-1.956.76-3.022.66-1.065 1.515-1.867 2.558-2.403L9.373 5c-.8.396-1.56.898-2.26 1.505-.71.607-1.34 1.305-1.9 2.094s-.98 1.68-1.25 2.69-.346 2.04-.217 3.1c.168 1.4.62 2.52 1.356 3.35.735.84 1.652 1.26 2.748 1.26.965 0 1.766-.29 2.4-.878.628-.576.94-1.365.94-2.368l.002.004zm9.124 0c0-.88-.23-1.618-.69-2.217-.326-.42-.768-.695-1.327-.825-.55-.13-1.07-.14-1.54-.03-.16-.94.09-1.95.75-3.02.66-1.06 1.514-1.86 2.557-2.4L18.49 5c-.8.396-1.555.898-2.26 1.505-.708.607-1.34 1.305-1.894 2.094-.556.79-.97 1.68-1.24 2.69-.273 1-.345 2.04-.217 3.1.165 1.4.615 2.52 1.35 3.35.732.833 1.646 1.25 2.742 1.25.967 0 1.768-.29 2.402-.876.627-.576.942-1.365.942-2.368v.012z" />
                            </svg>
                        </div>

                        <!-- Testimonial Content -->
                        <p class="quote">{{ item.text }}</p>

                        <!-- Stars -->
                        <div class="stars">
                            <svg *ngFor="let star of [1,2,3,4,5]" width="18" height="18" viewBox="0 0 24 24"
                                fill="currentColor">
                                <polygon
                                    points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" />
                            </svg>
                        </div>

                        <!-- Author -->
                        <div class="author-area">
                            <div class="author-avatar">
                                <img [src]="item.image" [alt]="item.name">
                            </div>
                            <div class="author-info">
                                <h4>{{ item.name }}</h4>
                                <span class="role">{{ item.role }}</span>
                                <span class="location">
                                    <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                        stroke-width="2">
                                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" />
                                        <circle cx="12" cy="10" r="3" />
                                    </svg>
                                    {{ item.location }}
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <button class="carousel-arrow next" (click)="onArrowClick('next')" aria-label="Siguiente">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="9 18 15 12 9 6" />
                </svg>
            </button>
        </div>

        <!-- Dots Navigation -->
        <div class="carousel-dots">
            <button *ngFor="let item of testimonials; let i = index" class="dot" [class.active]="i === currentIndex"
                (click)="goTo(i)" [attr.aria-label]="'Ir a testimonio ' + (i + 1)">
            </button>
        </div>
    </div>
</section>
