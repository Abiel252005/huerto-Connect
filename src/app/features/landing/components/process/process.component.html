<section class="proceso-section" id="process">
    <!-- Dynamic Space/Particles Background -->
    <div class="space-bg">
        <div class="stars"></div>
        <div class="twinkling"></div>
    </div>

    <div class="container-fluid">

        <!-- TOP SECTION: APP MOCKUP SHOWCASE -->
        <div class="showcase-container">

            <!-- LEFT TABS -->
            <aside class="app-sidebar">
                <button class="nav-btn" *ngFor="let screen of screens" [class.active]="activeScreenId === screen.id"
                    (click)="setActiveScreen(screen.id)">
                    <ion-icon [name]="screen.icon"></ion-icon> {{ screen.label }}
                </button>
            </aside>

            <!-- CENTER PHONE MOCKUP -->
            <main class="phone-mockup-wrapper">
                <div class="phone-mockup">
                    <div class="phone-notch"></div>

                    <div class="phone-screen light-theme-app" [ngSwitch]="activeScreenId">

                        <!-- SCREEN 1: Perfil (Agricultor) -->
                        <div *ngSwitchCase="'perfil'" class="mockup-view view-perfil">
                            <h2 class="mc-title">¿Cuál es tu perfil de agricultor?</h2>

                            <div class="mc-cards-stack">
                                <div class="mc-card">
                                    <div class="mc-icon-circle"><ion-icon name="leaf-outline"></ion-icon></div>
                                    <div class="mc-text">
                                        <h5>Agricultor Novato</h5>
                                        <p>Estoy empezando mi primer huerto.</p>
                                    </div>
                                </div>

                                <div class="mc-card active-card">
                                    <div class="mc-icon-circle"><ion-icon name="nutrition-outline"></ion-icon></div>
                                    <div class="mc-text">
                                        <h5>Productor Intermedio</h5>
                                        <p>Tengo algo de experiencia y busco optimizar.</p>
                                    </div>
                                </div>

                                <div class="mc-card">
                                    <div class="mc-icon-circle"><ion-icon name="car-sport-outline"></ion-icon></div>
                                    <div class="mc-text">
                                        <h5>Cultivador a Gran Escala</h5>
                                        <p>Gestiono cultivos extensos y busco análisis.</p>
                                    </div>
                                </div>
                            </div>

                            <div class="mc-spacer"></div>
                            <button class="mc-gradient-btn" (click)="nextScreen()">Siguiente</button>
                        </div>

                        <!-- SCREEN 2: Área de Cultivo -->
                        <div *ngSwitchCase="'area'" class="mockup-view view-area">
                            <div class="mc-header">
                                <ion-icon name="arrow-back-outline" class="mc-back-btn"
                                    (click)="setActiveScreen('perfil')"></ion-icon>
                            </div>
                            <h2 class="mc-title-small">Define tu área de cultivo</h2>

                            <div class="mc-white-container">
                                <div class="mc-inputs-row">
                                    <div class="mc-input-group">
                                        <label>Largo (m)</label>
                                        <div class="fake-input-box">10</div>
                                    </div>
                                    <div class="mc-input-group">
                                        <label>Ancho (m)</label>
                                        <div class="fake-input-box">10</div>
                                    </div>
                                </div>

                                <p class="mc-label-muted">Vista cenital de tu terreno:</p>

                                <div class="mc-map-area">
                                    <div class="mc-box-dotted">
                                        <strong>10m × 10m</strong>
                                        <small>100 m²</small>
                                    </div>
                                </div>
                            </div>

                            <div class="mc-spacer"></div>
                            <button class="mc-gradient-btn" (click)="nextScreen()">Siguiente</button>
                        </div>

                        <!-- SCREEN 3: Agua y Ubicación -->
                        <div *ngSwitchCase="'agua'" class="mockup-view view-agua">
                            <div class="mc-header">
                                <ion-icon name="arrow-back-outline" class="mc-back-btn"
                                    (click)="setActiveScreen('area')"></ion-icon>
                            </div>
                            <h2 class="mc-title-small">Ubicación y Acceso al Agua</h2>

                            <div class="mc-white-container">
                                <h4 class="section-heading"><ion-icon name="location-outline"
                                        style="color: #ef4444;"></ion-icon> Ubicación del huerto</h4>
                                <div class="mc-pill-green">
                                    <ion-icon name="location-outline"></ion-icon> Usar mi ubicación actual
                                </div>
                                <div class="mc-divider"><span>O ingresa manualmente</span></div>
                                <div class="mc-fake-input">Ej: Cuitlahuac Ver</div>
                            </div>

                            <div class="mc-white-container mt-gap">
                                <h4 class="section-heading"><ion-icon name="water-outline"
                                        style="color: #3b82f6;"></ion-icon> Acceso al agua</h4>
                                <p class="mc-sub-text">¿Cómo obtienes agua para tu huerto?</p>

                                <div class="mc-option active-option">
                                    <div class="mc-icon-circ"><ion-icon name="water-outline"></ion-icon></div>
                                    <div class="mc-opt-text">
                                        <h6>Flujo Constante</h6>
                                        <small>Acceso a agua corriente ilimitado.</small>
                                    </div>
                                </div>

                                <div class="mc-option">
                                    <div class="mc-icon-circ"><ion-icon name="calendar-outline"></ion-icon></div>
                                    <div class="mc-opt-text">
                                        <h6>Riego por Tandeo</h6>
                                        <small>Acceso programado o por días.</small>
                                    </div>
                                </div>

                                <div class="mc-option">
                                    <div class="mc-icon-circ"><ion-icon name="cloudy-outline"></ion-icon></div>
                                    <div class="mc-opt-text">
                                        <h6>Dependiente de Temporal</h6>
                                        <small>Mi riego principal es la lluvia.</small>
                                    </div>
                                </div>
                            </div>

                            <div class="mc-spacer"></div>
                            <button class="mc-gradient-btn" (click)="nextScreen()">Siguiente</button>
                        </div>

                        <!-- SCREEN 4: Inicio (Dashboard) -->
                        <div *ngSwitchCase="'inicio'" class="mockup-view view-inicio">
                            <div class="dash-header">
                                <div class="greeting">
                                    <span class="light-text">Hola,</span><br>
                                    <strong class="dark-text">Agricultor</strong>
                                </div>
                                <div class="dash-bell">
                                    <ion-icon name="notifications-outline"></ion-icon>
                                    <span class="badge">3</span>
                                </div>
                            </div>

                            <div class="dash-center-wrapper">
                                <div class="dash-empty-icon">
                                    <ion-icon name="leaf-outline"></ion-icon>
                                </div>

                                <h3 class="dash-h3">¡Bienvenido a tu huerto!</h3>
                                <p class="dash-p">Aun no tienes cultivos regitrados<br>Agrega tu primer cultivo para
                                    continuar</p>

                                <button class="dash-btn-solid">+ Agregar mi primer cultivo</button>
                            </div>

                            <div class="dash-bottom-nav">
                                <div class="nav-item active">
                                    <ion-icon name="home-outline"></ion-icon>
                                    <small>Inicio</small>
                                </div>
                                <div class="nav-item">
                                    <ion-icon name="trending-up-outline"></ion-icon>
                                    <small>Seguimiento</small>
                                </div>

                                <div class="nav-fab-wrap">
                                    <div class="nav-fab">
                                        <ion-icon name="scan-outline"></ion-icon>
                                    </div>
                                    <small>Análisis</small>
                                </div>

                                <div class="nav-item">
                                    <ion-icon name="people-outline"></ion-icon>
                                    <small>Comunidad</small>
                                </div>
                                <div class="nav-item">
                                    <ion-icon name="person-outline"></ion-icon>
                                    <small>Perfil</small>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </main>

            <!-- RIGHT DETAILS PANEL -->
            <article class="details-panel">
                <div class="panel-icon">
                    <ion-icon [name]="activeScreen.icon"></ion-icon>
                </div>
                <h2>{{ activeScreen.title }}</h2>
                <p>{{ activeScreen.desc }}</p>
                <ul class="feature-list">
                    <li *ngFor="let feat of activeScreen.features">
                        <ion-icon name="checkmark-outline"></ion-icon> {{ feat }}
                    </li>
                </ul>
            </article>

        </div>

        <!-- BOTTOM SECTION: STEPPER -->
        <div class="stepper-section">
            <div class="stepper-header">
                <h2>Cómo Funciona <span>Huerto Connect</span></h2>
                <p>Tu asistente agrícola impulsado por IA en 4 simples pasos</p>
            </div>

            <div class="stepper-container">

                <div class="step-card" *ngFor="let step of steps">
                    <div class="step-marker">
                        <span class="step-num">{{ step.number }}</span>
                        <div class="step-icon-wrap">
                            <ion-icon [name]="step.icon"></ion-icon>
                        </div>
                    </div>
                    <div class="step-content">
                        <h4>{{ step.title }}</h4>
                        <p>{{ step.desc }}</p>
                    </div>
                </div>

            </div>
        </div>

    </div>
</section>